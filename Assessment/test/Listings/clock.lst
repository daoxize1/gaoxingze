C51 COMPILER V9.57.0.0   CLOCK                                                             03/12/2020 01:00:34 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE CLOCK
OBJECT MODULE PLACED IN .\Objects\clock.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE clock.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\clo
                    -ck.lst) OBJECT(.\Objects\clock.obj)

line level    source

   1          #include <STC12C5A60S2.H>
   2          extern char Interface;
   3          unsigned char Time[3]={23,59,29};
   4          unsigned char Alarm[3]={00,01,00};
   5          char TimeDisplay[8];
   6          unsigned int i = 0;
   7          extern void LCDShowStr(unsigned char x,unsigned char y,char *str);
   8          
   9          void ClockInit()//10ms@32MHz
  10          {               
  11   1              TMOD &= 0xF0;           
  12   1              TMOD |= 0x01;           
  13   1              TL0 = 0xD5;             
  14   1              TH0 = 0x97;             
  15   1              TF0 = 0;                
  16   1              TR0 = 1;                
  17   1              ET0 = 1;
  18   1      }
  19          
  20          void CharToString(unsigned char Array);
  21          {
*** ERROR C141 IN LINE 21 OF clock.c: syntax error near '{'
  22                  TimeDisplay[0] = Array[0]/10+'0';
*** ERROR C136 IN LINE 22 OF clock.c: invalid dimension size: [0]
*** ERROR C231 IN LINE 22 OF clock.c: 'TimeDisplay': redefinition
*** ERROR C202 IN LINE 22 OF clock.c: 'Array': undefined identifier
  23                  TimeDisplay[1] = Array[0]%10+'0';
*** ERROR C279 IN LINE 23 OF clock.c: 'TimeDisplay': multiple initialization
*** ERROR C202 IN LINE 23 OF clock.c: 'Array': undefined identifier
  24                  TimeDisplay[2] = '-';
*** ERROR C279 IN LINE 24 OF clock.c: 'TimeDisplay': multiple initialization
*** ERROR C231 IN LINE 24 OF clock.c: 'TimeDisplay': redefinition
  25                  TimeDisplay[3] = Array[0]/10+'0';
*** ERROR C279 IN LINE 25 OF clock.c: 'TimeDisplay': multiple initialization
*** ERROR C231 IN LINE 25 OF clock.c: 'TimeDisplay': redefinition
*** ERROR C202 IN LINE 25 OF clock.c: 'Array': undefined identifier
  26                  TimeDisplay[4] = Array[0]%10+'0';
*** ERROR C279 IN LINE 26 OF clock.c: 'TimeDisplay': multiple initialization
*** ERROR C231 IN LINE 26 OF clock.c: 'TimeDisplay': redefinition
*** ERROR C202 IN LINE 26 OF clock.c: 'Array': undefined identifier
  27                  TimeDisplay[5] = '-';
*** ERROR C279 IN LINE 27 OF clock.c: 'TimeDisplay': multiple initialization
*** ERROR C231 IN LINE 27 OF clock.c: 'TimeDisplay': redefinition
  28                  TimeDisplay[6] = Array[0]/10+'0';
*** ERROR C279 IN LINE 28 OF clock.c: 'TimeDisplay': multiple initialization
*** ERROR C231 IN LINE 28 OF clock.c: 'TimeDisplay': redefinition
*** ERROR C202 IN LINE 28 OF clock.c: 'Array': undefined identifier
  29                  TimeDisplay[7] = Array[0]%10+'0';
*** ERROR C279 IN LINE 29 OF clock.c: 'TimeDisplay': multiple initialization
*** ERROR C231 IN LINE 29 OF clock.c: 'TimeDisplay': redefinition
*** ERROR C202 IN LINE 29 OF clock.c: 'Array': undefined identifier
  30          }
*** ERROR C141 IN LINE 30 OF clock.c: syntax error near '}'
  31          
C51 COMPILER V9.57.0.0   CLOCK                                                             03/12/2020 01:00:34 PAGE 2   

  32          void DisplayInterfaceA()
  33          {
  34   1              LCDShowStr(0,0,"A");
  35   1              CharToString(Time);
  36   1              LCDShowStr(0,2,TimeDisplay);
  37   1      }
  38          
  39          
  40          void DisplayInterfaceB()
  41          {
  42   1              LCDShowStr(0,0,"B");
  43   1              CharToString(Alarm);
  44   1              LCDShowStr(0,2,TimeDisplay);
  45   1      }
  46          
  47          
  48          void Timer0Interrupt() interrupt 1
  49          {
  50   1              i++;
  51   1              TL0 = 0xD5;
  52   1              TH0 = 0x97;     
  53   1              TR0 = 1;
  54   1              if(i == 100)
  55   1              {
  56   2                      Time[2]++;
  57   2                      i = 0;
  58   2                      if(Time[2] == 60)
  59   2                      {
  60   3                              Time[1]++;
  61   3                              Time[2] = 0;
  62   3                              if(Time[1] = 60)
  63   3                              {
  64   4                                      Time[0]++;
  65   4                                      Time[1] = 0;
  66   4                                      if(Time[0] == 24)
  67   4                                      {
  68   5                                              Time[0] = 0;
  69   5                                      }
  70   4                              }
  71   3                      }
  72   2              }
  73   1              if(i == 10&&Interface == 'A')
  74   1              {
  75   2                      DisplayInterfaceA();
  76   2              }
  77   1              if(i == 10&&Interface == 'B')
  78   1              {
  79   2                      DisplayInterfaceB();
  80   2              }
  81   1      }

C51 COMPILATION COMPLETE.  0 WARNING(S),  23 ERROR(S)
